{"ast":null,"code":"var _jsxFileName = \"/Users/atsukotoda/Desktop/react-chat-app/src/components/MessageList.js\";\nimport React, { useEffect, useState } from 'react';\nimport { List } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport MessageItem from './MessageItem';\nimport { messagesRef } from '../firebase';\nconst useStyles = makeStyles({\n  root: {\n    gridRow: 1,\n    overflow: 'auto',\n    width: '100%'\n  }\n});\n\nconst MessageList = () => {\n  const [messages, setMessages] = useState([]);\n  const classes = useStyles();\n  useEffect(() => {\n    messagesRef.orderByKey().limitToLast(15).on('value', snapshot => {\n      const messages = snapshot.val();\n      if (messages === null) return;\n      const entries = Object.entries(messages);\n      const newMessages = entries.map(entry => {\n        const [key, nameAndText] = entry;\n        return {\n          key,\n          ...nameAndText\n        };\n      });\n      setMessages(newMessages);\n    });\n  }, []);\n  const length = messages.length;\n  return /*#__PURE__*/React.createElement(List, {\n    className: classes.root,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 5\n    }\n  }, messages.map(({\n    key,\n    name,\n    text\n  }, index) => {\n    const isLastItem = length === index + 1;\n    return /*#__PURE__*/React.createElement(MessageItem, {\n      key: key,\n      name: name,\n      text: text,\n      isLastItem: isLastItem,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 11\n      }\n    });\n  }));\n};\n\nexport default MessageList;","map":{"version":3,"sources":["/Users/atsukotoda/Desktop/react-chat-app/src/components/MessageList.js"],"names":["React","useEffect","useState","List","makeStyles","MessageItem","messagesRef","useStyles","root","gridRow","overflow","width","MessageList","messages","setMessages","classes","orderByKey","limitToLast","on","snapshot","val","entries","Object","newMessages","map","entry","key","nameAndText","length","name","text","index","isLastItem"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,IAAT,QAAqB,mBAArB;AACA,SAASC,UAAT,QAA2B,0BAA3B;AAEA,OAAOC,WAAP,MAAwB,eAAxB;AACA,SAASC,WAAT,QAA4B,aAA5B;AAEA,MAAMC,SAAS,GAAGH,UAAU,CAAC;AAC3BI,EAAAA,IAAI,EAAE;AACJC,IAAAA,OAAO,EAAE,CADL;AAEJC,IAAAA,QAAQ,EAAE,MAFN;AAGJC,IAAAA,KAAK,EAAE;AAHH;AADqB,CAAD,CAA5B;;AAQA,MAAMC,WAAW,GAAG,MAAM;AACxB,QAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BZ,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAMa,OAAO,GAAGR,SAAS,EAAzB;AAEAN,EAAAA,SAAS,CAAC,MAAM;AACdK,IAAAA,WAAW,CACRU,UADH,GAEGC,WAFH,CAEe,EAFf,EAGGC,EAHH,CAGM,OAHN,EAGgBC,QAAD,IAAc;AACzB,YAAMN,QAAQ,GAAGM,QAAQ,CAACC,GAAT,EAAjB;AACA,UAAIP,QAAQ,KAAK,IAAjB,EAAuB;AAEvB,YAAMQ,OAAO,GAAGC,MAAM,CAACD,OAAP,CAAeR,QAAf,CAAhB;AACA,YAAMU,WAAW,GAAGF,OAAO,CAACG,GAAR,CAAaC,KAAD,IAAW;AACzC,cAAM,CAACC,GAAD,EAAMC,WAAN,IAAqBF,KAA3B;AACA,eAAO;AAAEC,UAAAA,GAAF;AAAO,aAAGC;AAAV,SAAP;AACD,OAHmB,CAApB;AAIAb,MAAAA,WAAW,CAACS,WAAD,CAAX;AACD,KAbH;AAcD,GAfQ,EAeN,EAfM,CAAT;AAiBA,QAAMK,MAAM,GAAGf,QAAQ,CAACe,MAAxB;AAEA,sBACE,oBAAC,IAAD;AAAM,IAAA,SAAS,EAAEb,OAAO,CAACP,IAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGK,QAAQ,CAACW,GAAT,CAAa,CAAC;AAAEE,IAAAA,GAAF;AAAOG,IAAAA,IAAP;AAAaC,IAAAA;AAAb,GAAD,EAAsBC,KAAtB,KAAgC;AAC5C,UAAMC,UAAU,GAAGJ,MAAM,KAAKG,KAAK,GAAG,CAAtC;AAEA,wBACE,oBAAC,WAAD;AACE,MAAA,GAAG,EAAEL,GADP;AAEE,MAAA,IAAI,EAAEG,IAFR;AAGE,MAAA,IAAI,EAAEC,IAHR;AAIE,MAAA,UAAU,EAAEE,UAJd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF;AAQD,GAXA,CADH,CADF;AAgBD,CAvCD;;AAyCA,eAAepB,WAAf","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { List } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport MessageItem from './MessageItem';\nimport { messagesRef } from '../firebase';\n\nconst useStyles = makeStyles({\n  root: {\n    gridRow: 1,\n    overflow: 'auto',\n    width: '100%',\n  },\n});\n\nconst MessageList = () => {\n  const [messages, setMessages] = useState([]);\n  const classes = useStyles();\n\n  useEffect(() => {\n    messagesRef\n      .orderByKey()\n      .limitToLast(15)\n      .on('value', (snapshot) => {\n        const messages = snapshot.val();\n        if (messages === null) return;\n\n        const entries = Object.entries(messages);\n        const newMessages = entries.map((entry) => {\n          const [key, nameAndText] = entry;\n          return { key, ...nameAndText };\n        });\n        setMessages(newMessages);\n      });\n  }, []);\n\n  const length = messages.length;\n\n  return (\n    <List className={classes.root}>\n      {messages.map(({ key, name, text }, index) => {\n        const isLastItem = length === index + 1;\n\n        return (\n          <MessageItem\n            key={key}\n            name={name}\n            text={text}\n            isLastItem={isLastItem}\n          />\n        );\n      })}\n    </List>\n  );\n};\n\nexport default MessageList;\n"]},"metadata":{},"sourceType":"module"}